
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Templates &#8212; gisrep 0.2.2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Usage" href="usage.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="templates">
<h1>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h1>
<p>Templates used by gisrep are text files formatted in the <a class="reference external" href="http://jinja2.readthedocs.io/en/latest/templates.html">Jinja template
syntax</a>,
denoted by a .tplt extension.</p>
<div class="section" id="custom-templates">
<h2>Custom templates<a class="headerlink" href="#custom-templates" title="Permalink to this headline">¶</a></h2>
<p>Custom templates can be passed to gisrep to publish specialised reports.
All that is required is to create a file that:</p>
<ul class="simple">
<li>Has the <code class="docutils literal notranslate"><span class="pre">.tplt</span></code> extension</li>
<li>Is formatted in the <a class="reference external" href="http://jinja2.readthedocs.io/en/latest/templates.html">Jinja template
syntax</a></li>
<li>Accesses the <code class="docutils literal notranslate"><span class="pre">issues</span></code> context variable - a list of <a class="reference external" href="http://pygithub.readthedocs.io/en/latest/github_objects/Issue.html">PyGithub issue
objects</a></li>
</ul>
<p>Gisrep templates should contain an extension that hints at the format of
any output document. For example a template ‘report’ that produces HTML
should be named <code class="docutils literal notranslate"><span class="pre">report.html.tplt</span></code>.</p>
<p>A simple example template, <code class="docutils literal notranslate"><span class="pre">simple.md.tplt</span></code> is shown below:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">issue</span> <span class="k">in</span> <span class="nv">issues</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">- </span><span class="cp">{{</span> <span class="nv">issue.title</span> <span class="cp">}}</span><span class="x"> - (</span><span class="cp">{{</span> <span class="nv">issue.number</span> <span class="cp">}}</span><span class="x">)</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>This template could then be passed to gisrep using the following example
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gisrep</span> <span class="n">report</span> <span class="o">--</span><span class="n">external</span> <span class="o">./</span><span class="n">simple</span><span class="o">.</span><span class="n">md</span> <span class="s2">&quot;repo:twbs/bootstrap&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-logic">
<h2>Custom logic<a class="headerlink" href="#custom-logic" title="Permalink to this headline">¶</a></h2>
<p>A Github search query coupled with Jinja’s templating syntax (with its
control structures, expressions, filters, etc.) is sufficient to produce
most reports. However sometimes it is necessary to perform some logic
prior to formatting the results in the template.</p>
<p>Custom logic can be supplied in python file that:</p>
<ul class="simple">
<li>Is in the same directory as the template</li>
<li>Has the same file name as the template, but has the <code class="docutils literal notranslate"><span class="pre">\*.py</span></code> extension</li>
<li>Contains a function <code class="docutils literal notranslate"><span class="pre">get_context(issues)</span></code> that returns a dictionary
of variable names and their values</li>
</ul>
<p>A simple example logic file, <code class="docutils literal notranslate"><span class="pre">report.md.py</span></code> is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_context</span><span class="p">(</span><span class="n">issues</span><span class="p">):</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">issue</span> <span class="ow">in</span> <span class="n">issues</span><span class="p">:</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">issue</span><span class="o">.</span><span class="n">labels</span> <span class="k">if</span> <span class="n">l</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">])</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span>
        <span class="s1">&#39;issues&#39;</span><span class="p">:</span> <span class="n">issues</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The corresponding template file, <code class="docutils literal notranslate"><span class="pre">report.md.tplt</span></code>, might look like:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">labels</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    # </span><span class="cp">{{</span> <span class="nv">label.name</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">issue</span> <span class="k">in</span> <span class="nv">issues</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">issue.labels</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">- </span><span class="cp">{{</span> <span class="nv">issue.title</span> <span class="cp">}}</span><span class="x"> - (</span><span class="cp">{{</span> <span class="nv">issue.number</span> <span class="cp">}}</span><span class="x">)</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">gisrep</a></h1>



<p class="blurb">The command line Github issues reporter</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=briggySmalls&repo=gisrep&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#custom-templates">Custom templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-logic">Custom logic</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="usage.html" title="previous chapter">Usage</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Sam Briggs.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/templates.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-108350683-2']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>